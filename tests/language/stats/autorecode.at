AT_BANNER([AUTORECODE procedure])

AT_SETUP([AUTORECODE numbers and short strings])
AT_DATA([autorecode.sps],
  [data list /X 1-5(a) Y 7.
begin data.
lasdj 1
asdfk 0
asdfj 2
asdfj 1
asdfk 2
asdfj 9
lajks 9
asdfk 0
asdfk 1
end data.

autorecode x y into A B/descend.

list.
compute Z=trunc(y/2).
autorecode z into W.
list.
])
AT_CHECK([pspp -O format=csv autorecode.sps], [0],
  [Table: Reading 1 record from INLINE.
Variable,Record,Columns,Format
X,1,1-  5,A5
Y,1,7-  7,F1.0

Table: Data List
X,Y,A,B
lasdj,1,1.00,3.00
asdfk,0,3.00,4.00
asdfj,2,4.00,2.00
asdfj,1,4.00,3.00
asdfk,2,3.00,2.00
asdfj,9,4.00,1.00
lajks,9,2.00,1.00
asdfk,0,3.00,4.00
asdfk,1,3.00,3.00

Table: Data List
X,Y,A,B,Z,W
lasdj,1,1.00,3.00,.00,1.00
asdfk,0,3.00,4.00,.00,1.00
asdfj,2,4.00,2.00,1.00,2.00
asdfj,1,4.00,3.00,.00,1.00
asdfk,2,3.00,2.00,1.00,2.00
asdfj,9,4.00,1.00,4.00,3.00
lajks,9,2.00,1.00,4.00,3.00
asdfk,0,3.00,4.00,.00,1.00
asdfk,1,3.00,3.00,.00,1.00
])
AT_CLEANUP



AT_SETUP([AUTORECODE long strings and check the value labels])
AT_DATA([ar.sps],
  [data list notable list /s (a16) x *.
begin data.
widgets      1
thingummies  2
oojars       3
widgets      4
oojars       5
thingummies  6
oojimiflips  7
end data.

autorecode s into new.

list.

display dictionary.
])

AT_CHECK([pspp -O format=csv ar.sps], [0],
  [Table: Data List
s,x,new
widgets         ,1.00,4.00
thingummies     ,2.00,3.00
oojars          ,3.00,1.00
widgets         ,4.00,4.00
oojars          ,5.00,1.00
thingummies     ,6.00,3.00
oojimiflips     ,7.00,2.00

Variable,Description,,Position
s,Format: A16,,1
,Measure: Nominal,,
,Display Alignment: Left,,
,Display Width: 16,,
x,Format: F8.2,,2
,Measure: Scale,,
,Display Alignment: Right,,
,Display Width: 8,,
new,Format: F8.2,,3
,Measure: Scale,,
,Display Alignment: Right,,
,Display Width: 8,,
,1,oojars,
,2,oojimiflips,
,3,thingummies,
,4,widgets,
])

AT_CLEANUP
