Thu May  4 21:50:11 2006  Ben Pfaff  <blp@gnu.org>

	Continue reforming procedure execution.  In this phase, move
	procedure.c and procedure.h from src to src/data.  Update
	makefiles and #includes accordingly.

	* procedure.c: Moved here from src/.

	* procedure.h: Moved here from src/.

Wed May  3 22:42:12 2006  Ben Pfaff  <blp@gnu.org>

	Continue reforming procedure execution.  In this phase, get rid of
	many global variables, consolidating procedure execution in
	procedure.c.  Encapsulate transformations in new "struct
	trns_chain".  Also, change implementation of N OF CASES, FILTER,
	and PROCESS IF from special cases to transformations.
	 
	* automake.mk: (src_data_libdata_a_SOURCES) Add transformations.c,
	transformations.h.

	* dictionary.c: (global variable default_dict) Move to
	src/procedure.c.

	* variable.h: (TRNS_*) Move to transformations.h.
	(struct transformation) Move to transformations.c.

Thu May  4 13:47:06 WST 2006 John Darrington <john@darrington.wattle.id.au>

	* sys-file-reader.c: Fixed invalid read problems.

Tue May  2 15:57:10 2006  Ben Pfaff  <blp@gnu.org>

	* storage-stream.c: Add missing function comments.

Tue May  2 15:50:21 2006  Ben Pfaff  <blp@gnu.org>

	Continue reforming procedure execution.  In this phase, add some
	new, needed functionality to storage-stream.

	* storage-stream.c: (storage_source_decapsulate) New function.

Tue May  2 15:43:36 2006  Ben Pfaff  <blp@gnu.org>

	* variable.c (width_to_bytes): Declarations must precede
	statements for C90 compliance.

Tue May  2 10:42:05 WST 2006 John Darrington <john@darrington.wattle.id.au>

	* data-out.c, data-in.c, variable.c, variable.h: New functions 
	copy_mangle and copy_demangle for reading/writing cases; emulates the 
	way SPSS deals with strings > 255 bytes.

	* sys-file-reader.c sys-file-writer.c: Added support for Record 7, 
	subtype 14 needed for strings longer than 255 bytes.

	* dictionary.c, format.def, value.c : Updated to use MAX_STRING 
        instead of literal values. Also fixed some constness issues.

	* format.h: Constness

	* sfm-private.h: Renamed the case_size identifier, since I discovered 
        that SPSS's respect for this variable is very nominal.

Mon May  1 15:45:42 2006  Ben Pfaff  <blp@gnu.org>

	Change case limit type from int to size_t.

	* dictionary.c: (struct dictionary) Change type of case_limit
	member.
	(dict_get_case_limit) Change return type.
	(dict_set_case_limit) Change parameter type.

Wed Apr 26 20:01:19 2006  Ben Pfaff  <blp@gnu.org>

	* variable.h: (struct variable) Rename `reinit' member as `leave'
	and invert sense.  Fix up all references.

Wed Apr 26 19:39:28 2006  Ben Pfaff  <blp@gnu.org>

	Continue reforming procedure execution.  In this phase, break
	procedure.c into multiple files.
	
	* automake.mk: (src_data_libdata_a_SOURCES) Add all the new files.

	* case-sink.c: New file.

	* case-sink.h: New file.
	
	* case-source.c: New file.

	* case-source.h: New file.
	
	* storage-stream.c: New file.

	* storage-stream.h: New file.

Wed Apr 26 14:55:19 2006  Ben Pfaff  <blp@gnu.org>

	* variable.h: (struct variable) Remove `init' member and all
	references to it from other files.  It was initialized in several
	places, but nothing really ever used it for anything worthwhile.
	Thanks to Jason Stover for pointing out how confusing this
	member is.

Sun Apr 23 22:04:45 2006  Ben Pfaff  <blp@gnu.org>

	Continue reforming error message support.  In this phase, get rid
	of message "titles" and put the message text in `struct error'.
	Now `struct error' encapsulates a message more properly.
	
	* casefile.c: (io_error) Use err_msg() instead of err_vmsg().
	Format message ourselves.

	* data-in.c: (vdls_error) Ditto.

	* por-file-reader.c: (error) Ditto.

	* sys-file-reader.c: (corrupt_msg) Ditto.

Sun Apr 16 18:49:51 2006  Ben Pfaff  <blp@gnu.org>

	GNU standards require "file name" instead of "filename" in
	documentation.  It's nice for our code to follow the convention
	too.
	
	* casefile.c: (struct casefile) Rename `filename' member to
	`file_name'.  Updated all references.

	* file-name.c: [!unix] (struct file_identity) Rename
	normalized_filename member to normalized_file_name.  Updated all
	references.

Sun Apr 16 18:35:33 2006  Ben Pfaff  <blp@gnu.org>

	We don't really support anything but Unix-like environments well,
	so we might as well de-obfuscate by writing directory and path
	separators explicitly.

	* file-name.h: (macro DIR_SEPARATOR) Removed.  Changed all usages
	to just '/'.
	(macro PATH_SEPARATOR) Removed.  Changed all usages to just ':'.
	(macro DIR_SEPARATOR_STRING) Removed.  Changed all usages to just
	"/".
	(macro PATH_SEPARATOR_STRING) Removed.  Changed all usages to just
	":"

Sun Apr 16 18:28:35 2006  Ben Pfaff  <blp@gnu.org>

	GNU standards require "file name" instead of "filename" in
	documentation.  It's nice for our code to follow the convention
	too.
	
	* filename.c: Rename to file-name.c.

	* filename.h: Rename to file-name.h.  Update all inclusions.
	Update header guards.

	* automake.mk: Update file names.

Sun Apr 16 16:42:47 2006  Ben Pfaff  <blp@gnu.org>

	* filename.c: (fn_dirname) Renamed fn_dir_name(), all references
	updated.
	(fn_basename) Removed (dead code).
	(fn_absolute_p) Renamed fn_is_absolute(), all references updated.
	(fn_special_p) Renamed fn_is_special(), all references updated.
	(fn_exists_p) Renamed fn_exists(), all references updated.

Sun Apr 16 16:33:58 2006  Ben Pfaff  <blp@gnu.org>

	* filename.c: (fn_tilde_expand) Rewrite for cleaner code.  
	Also, now it only tilde-expands file names, not paths.
	(fn_search_path) Tilde-expand one directory at a time.

Sun Apr 16 16:28:06 2006  Ben Pfaff  <blp@gnu.org>

	* filename.c: (fn_search_path) rewrite for cleaner code.  Also,
	get rid of non-Unixlike version of the code, which has probably
	never been tested.
	(fn_prepend_dir) Removed (dead code).

	* filename.h: (macro DIR_SEPARATOR_STRING) New.
	(macro PATH_SEPARATOR_STRING) New.
Sun Apr 16 16:05:28 2006  Ben Pfaff  <blp@gnu.org>

	Continue reforming error message support.  In this phase, we get
	rid of VM() and the other msg() support for "verbosity", replacing
	it by a new function verbose_msg().

	* filename.c: (fn_search_path) Use verbose_msg() instead of
	msg(VM(), ...).  

Sat Apr 15 19:53:19 2006  Ben Pfaff  <blp@gnu.org>

	* sfm-private.h: Get rid of #defines after #error, which makes no
	sense.

Sat Apr 15 19:48:57 2006  Ben Pfaff  <blp@gnu.org>

	Get rid of our own int32 type in favor of the standard int32_t
	type.
	
	* sfm-private.h: (int32 macro) Don't define this anymore.  Do
	include <stdint.h>.

	* sys-file-reader.c: Use int32_t instead of int32 throughout.
	
	* sys-file-writer.c: Use int32_t instead of int32 throughout.

Sat Apr 15 19:36:47 2006  Ben Pfaff  <blp@gnu.org>

	Remove ill-considered file routines that are no longer used.
	
	* filename.c: (fn_open_ext) Removed.
	(fn_close_ext) Removed.

	* filename.h: (struct file_ext) Removed.

Mon Apr  3 13:22:39 2006  Ben Pfaff  <blp@gnu.org>

	* variable.c (var_is_valid_name): Move declarations before code
	for C90 compliance.

Tue Apr  4 15:28:40 WST 2006 John Darrington <john@darrington.wattle.id.au>

	* filename.ch (fn_interp_vars): Fixed small buglet.

Tue Mar 28 13:47:16 WST 2006 John Darrington <john@darrington.wattle.id.au>
	
	* filename.[ch] (fn_interp_vars): Changed the signature and semantics
	so as to modify the string inline.   Thus makeing it easier to
	destroy the results when no longer needed.
	
2006-03-25  Jason Stover  <jhs@math.gcsu.edu>

	* category.c (cat_stored_values_destroy): Fixed memory leak.

Fri Mar 24 18:15:41 2006  Ben Pfaff  <blp@gnu.org>

	Add some missing frees.  Thanks to John Darrington for reporting
	these.

	* any-writer.c (any_writer_close): Free writer.

	* any-reader.c (any_reader_close): Free reader.

Mon Mar 20 16:33:53 2006  Ben Pfaff  <blp@gnu.org>

	* por-file-reader.c: (error) Mark as NO_RETURN.

Sat Mar 11 15:06:07 WST 2006 John Darrington <john@darrington.wattle.id.au>

	* settings.c: Changed default value of scompress to true.

Sat Mar  4 13:22:51 2006  Ben Pfaff  <blp@gnu.org>

	* sfm-private.h: Include variable.h, to get SHORT_NAME_LEN.

	* value.h: Remove check on MAX_SHORT_STRING, which I don't think
	really applies.

	* variable.h: Move definition of SHORT_NAME_LEN, LONG_NAME_LEN
	here from pref.h.orig.

Sat Mar  4 12:50:48 WST 2006 John Darrington <john@darrington.wattle.id.au>

	* sys-file-reader.c: Fixed bug reading compressed files.

Thu Mar  2 08:40:33 WST 2006 John Darrington <john@darrington.wattle.id.au>

	* Numerous renames.  See src/ChangeLog for details.
	
	* Moved files from src directory
